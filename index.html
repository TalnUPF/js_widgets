<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="http://weaver.nlplab.org/~brat/demo/v1.3/style-vis.css"/>
  <link rel="stylesheet" href="./external/radar.css">
  <link rel="stylesheet" href="./css/fix.css">
  
  <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
  <script type="text/javascript" src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js" integrity="sha384-smHYKdLADwkXOn1EmN1qk/HfnUcbVRZyYmZ4qpPea6sjB/pTJ0euyQp0Mk8ck+5T" crossorigin="anonymous"></script>
  <script type="text/javascript" src="http://weaver.nlplab.org/~brat/demo/v1.3/client/lib/head.load.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cat.net/ajax/libs/sigma.js/1.2.1/sigma.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cat.net/ajax/libs/sigma.js/1.2.1/plugins/sigma.layout.forceAtlas2.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cat.net/ajax/libs/sigma.js/1.2.1/plugins/sigma.parsers.gexf.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cat.net/ajax/libs/sigma.js/1.2.1/plugins/sigma.renderers.edgeLabels.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cat.net/ajax/libs/sigma.js/1.2.1/plugins/sigma.plugins.filter.min.js"></script>
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.6/d3.min.js"></script>
  <script type="text/javascript" src="./external/radarChart.js"></script>
  <script type="text/javascript" src="./js/taln.widgets.js"></script>

  <title>TALN Widgets</title>
</head>

<body>
  <div class="container-fluid">
    <h1 align="center">TALN Widgets examples</h1>
  </div>
  
  <div class="container">

		<ul class="nav nav-tabs" id="myTab" role="tablist">
		  <li class="nav-item">
			<a class="nav-link active" data-toggle="tab" href="#highlight" role="tab" aria-controls="highlight-tab" aria-selected="true">Highlight</a>
		  </li>
		  <li class="nav-item">
			<a class="nav-link" data-toggle="tab" href="#brat" role="tab" aria-controls="brat-tab" aria-selected="false">Brat</a>
		  </li>
		  <li class="nav-item">
			<a class="nav-link" data-toggle="tab" href="#graph" role="tab" aria-controls="graph-tab" aria-selected="false">Graph</a>
		  </li>
		  <li class="nav-item">
			<a class="nav-link" data-toggle="tab" href="#chart" role="tab" aria-controls="chart-tab" aria-selected="false">Chart</a>
		  </li>
		</ul>

		<div class="tab-content" id="myTabContent">
			<div class="tab-pane fade show active" id="highlight" role="tabpanel" aria-labelledby="highlight-tab">
				<form id="highlightForm">
					<div class="form-group">
				  		<div id="intensityComponent" class="form-control" style="height: 200px;" contenteditable="true"></div>
					</div>
					<button type="submit" class="btn btn-primary btn-lg" id="submitHighlight" data-loading-text="<i class='fa fa-spinner fa-spin'></i> Processing">Analyze</button>
				</form>
			</div>
	
			<div class="tab-pane fade" id="brat" role="tabpanel" aria-labelledby="brat-tab">
				<button class="btn btn-primary btn-lg" id="submitBrat" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Processing">Analyze</button>
			
				<div id="bratComponent"></div>
			</div>
		
			<div class="tab-pane fade" id="graph" role="tabpanel" aria-labelledby="graph-tab">
				<button class="btn btn-primary btn-lg" id="submitGraph" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Processing">Analyze</button>
				
				<div id="graphComponent" style="height: 500px;"></div>
			</div>
		
			<div class="tab-pane fade" id="chart" role="tabpanel" aria-labelledby="chart-tab">
				<button class="btn btn-primary btn-lg" id="submitChart" data-loading-text="<i class='fa fa-spinner fa-spin '></i> Processing">Analyze</button>
			
				<div id="chartComponent" style="height: 500px;"></div>
			</div>
		
		</div>
	
	</div>
  

<script type="text/javascript">
/**
 * Base output JavaScript functions
 */
var bratLocation = 'http://weaver.nlplab.org/~brat/demo/v1.3';
head.js(
	//JQuery and Boostrap already loaded in head section

	// External libraries
	'./external/jquery.svg.min.js',
    './external/jquery.svgdom.min.js',
	
	// brat helper modules
	bratLocation + '/client/src/configuration.js',
	bratLocation + '/client/src/util.js',
	bratLocation + '/client/src/annotation_log.js',
	bratLocation + '/client/lib/webfont.js',
	
	// brat modules
	bratLocation + '/client/src/dispatcher.js',
	bratLocation + '/client/src/url_monitor.js',
	
	'./external/visualizer.js'
);

function spinButton() {
  var button = $("#btnLoad");
  button.data('original-text', button.html());
  button.html(button.data('loading-text'));
  setTimeout(function() {
    button.html(button.data('original-text'));
  }, 80000);
}

function unspinButton() {
  var button = $("#btnLoad");
  button.html(button.data('original-text'));
}

var margin = {top: 100, right: 100, bottom: 100, left: 100};

var color = d3.scale.ordinal()
				.range(["#FF0000","#00FF00","#0000FF","#FFFF00","#00FFFF", "#FFFFFF"]);

var radarChartOptions = {
  w: 500,
  h: 500,
  margin: margin,
  maxValue: 0,
  levels: 5,
  roundStrokes: false,
  roundGrid: false,
  color: color,
  opacityArea: 0.25
};

head.ready(function() {
	$("#highlightForm").submit(function(event) {
      event.preventDefault();
      
      var inputText = $("#intensity").text();
      taln.widgets.submitForm("POST", "./resources/resultIntensity.json", inputText, taln.widgets.loadIntensity, "intensityComponent", spinButton, unspinButton);
    });
    
    $("#submitBrat").click(function() {

      taln.widgets.submitForm("POST", "./resources/resultBrat.json", "", taln.widgets.loadBrat, "bratComponent", spinButton, unspinButton);
    });
    
    $("#submitGraph").click(function() {
      
      taln.widgets.submitForm("POST", "./resources/resultGraph.json", "", taln.widgets.loadGraph, "graphComponent", spinButton, unspinButton);
    });
    
    $("#submitChart").click(function() {
      
      taln.widgets.submitForm("POST", "./resources/baseRadar.json", "", taln.widgets.loadRadar, "chartComponent", spinButton, unspinButton);
    });
});
</script>
